appId: com.role-play-ai.environment-setup
productName: VRC Character Updater
directories:
  output: dist
  buildResources: build

# Icon configuration - should be in buildResources directory
icon: build/icon.ico

# Optimize file inclusion - exclude unnecessary files
files:
  - src/**/*
  - package.json
  # Exclude test files, docs, and dev files
  - "!**/*.test.js"
  - "!**/tests/**"
  - "!**/docs/**"
  - "!**/memory-bank/**"
  - "!**/node_modules/**"
  - "!**/.git/**"
  - "!**/README.md"
  - "!**/jest.config.js"
  - "!**/electron-builder.yml"

# Compression for smaller size
compression: maximum

# GitHub releases for auto-update
publish:
  provider: github
  owner: Nobel90
  repo: Role-Play-Ai-Environment-Setup-

win:
  target:
    - target: portable
      arch:
        - x64
  artifactName: ${productName}-${version}-portable.${ext}
  icon: build/icon.ico
  signtoolOptions:
    signingHashAlgorithms:
      - sha256
  # Bundle Node.js runtime with the app for update mechanism
  extraResources:
    - from: node_modules/node/bin/node.exe
      to: node.exe
      filter:
        - "**/*"
  # Code signing configuration for USB token
  # Uses certificate from Windows Certificate Store (USB token)
  # Set CSC_NAME environment variable to certificate subject name or thumbprint
  # If not set, will auto-detect the first available code signing certificate
  # Custom signing is handled by afterPack hook (sign.js)

# Custom signing hook - runs after the executable is packed
# We disable default signing and use our custom USB token signing
afterPack: sign.js

portable:
  artifactName: ${productName}-${version}-portable.${ext}

# NSIS installer (optional, for users who want installer)
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: VRC Character Updater

mac:
  target: dmg
  category: public.app-category.utilities

linux:
  target: AppImage
  category: Utility

